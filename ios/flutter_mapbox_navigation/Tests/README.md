# iOS Tests for Flutter Mapbox Navigation

## Overview

This directory contains property-based tests for the iOS native layer of the Flutter Mapbox Navigation plugin, specifically for the History Events API feature.

## Test Structure

### HistoryEventsParserTests.swift

Contains property-based tests for the `HistoryEventsParser` class, validating the correctness properties defined in the design document.

#### Implemented Properties

1. **Property 1: Complete Event Extraction** (Requirements 1.1, 1.2)
   - Validates that all events from a history file are extracted
   - Requires integration testing with real history files

2. **Property 2: Location Event Field Completeness** (Requirement 2.2)
   - Validates that all required fields are present in serialized location events
   - Runs 100 iterations with random location data
   - ‚úÖ Fully implemented and testable

3. **Property 3: Route Event Information Completeness** (Requirement 2.3)
   - Validates that route events contain all key information
   - Requires integration testing with real route events

## Running Tests

### Via Xcode

1. Open the iOS project in Xcode
2. Select an iOS simulator as the destination
3. Run tests with `Cmd+U` or through the Test Navigator

### Via Command Line

```bash
# From the ios/flutter_mapbox_navigation directory
xcodebuild test -scheme flutter_mapbox_navigation -destination 'platform=iOS Simulator,name=iPhone 15'
```

## Integration Testing Notes

Some property tests (Properties 1 and 3) require real history files generated by the Mapbox Navigation SDK during actual navigation sessions. These tests are documented with their expected structure and should be run as integration tests with:

1. Real navigation history files from the app
2. Known event counts and structures
3. Validation against the actual Mapbox SDK behavior

## Test Coverage

- ‚úÖ Location data serialization (Property 2)
- üìù Complete event extraction (Property 1) - requires integration testing
- üìù Route event serialization (Property 3) - requires integration testing

## Notes

- All tests follow the design document requirement of running at least 100 iterations for property-based testing
- Tests use XCTest framework as specified in the design document
- Each test is tagged with the feature name and property number for traceability
